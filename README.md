Playwright test framework (ES modules)

Overview

This repository is a Playwright scaffold tailored for maintainable, scalable UI test suites. It includes:

- Page Object Model (POM) classes to encapsulate page interactions
- Fixtures and utilities for test data (JSON, CSV, Faker)
- Hooks to capture screenshots/videos on failures
- HTML + Allure reporting configuration
- Example add-ons: API tests, performance sampling, JS coverage via CDP
- GitHub Actions CI workflow that runs tests and uploads reports

Quickstart

1. Install dependencies and Playwright browsers:

```powershell
npm install
npx playwright install --with-deps
```

2. Run all tests locally:

```powershell
npm test
```

3. Run a single spec (example):

```powershell
npx playwright test tests/google.spec.js --project=chromium
```

4. Open the HTML report generated by the last run:

```powershell
npm run test:report
```

Easy command cheatsheet (quick & simple)

Run all tests (parallel by default):

```powershell
npm test
```

Run tests in headed mode (shows browser windows):

```powershell
npm run test:headed
```

Run a single spec (example):

```powershell
npx playwright test tests/google.spec.js --project=chromium
```

Run tests only in Chromium (useful for JS coverage example):

```powershell
npx playwright test --project=chromium
```

Generate/open the last HTML report:

```powershell
npm run test:report
```

Run tests and keep Playwright report folder so you can inspect screenshots/videos:

```powershell
npx playwright test --reporter=html
```

Run tests in parallel using Playwright CLI with a specific worker count (example: 4 workers):

```powershell
npx playwright test --workers=4
```

Important notes (short & clear)

- To use Allure reporting locally you must install the Allure CLI separately (not included here).
- Never commit secrets. Use the `.env` file for local testing and add real credentials to your CI secrets.
- The repository includes an example MSSQL snippet at `utils/mssqlExample.js`—it is commented out and will not execute unless you enable and install the `mssql` package.


Repository file structure

Top-level layout and purpose of key files/folders:

```
.
├─ tests/                    # Playwright test files (ES modules)
│  ├─ example.spec.js        # Playwright site smoke tests (uses POM)
│  ├─ google.spec.js         # (renamed) Playwright site test replacing flaky google.com
│  ├─ data-driven.spec.js    # Demo: reads JSON & CSV fixtures and runs parameterized tests
│  ├─ controls.spec.js       # Demo: exercises UI controls (TodoMVC)
│  ├─ api.spec.js            # Demo: API tests using Playwright request fixture
│  ├─ performance.spec.js    # Demo: lightweight performance sampling
│  └─ coverage.spec.js       # Demo: Chromium-only JS coverage via CDP

├─ pages/                    # Page Object Model (POM) classes
│  ├─ homePage.js            # Home page interactions for playwright.dev
│  └─ searchPage.js          # Search page interactions (Google example kept for reference)

├─ utils/                    # Utility helpers
│  ├─ helpers.js             # small utility helpers (date, wait)
│  ├─ dataGenerator.js       # faker-based dynamic data
│  └─ csvReader.js           # read CSV fixtures (sync)

├─ fixtures/                 # Static test data
│  ├─ testData.json          # JSON keywords example
│  └─ data.csv               # CSV example for data-driven tests

├─ docs/                     # Extra docs, add-ons and playbooks
│  └─ BONUS_ADDONS.md        # Guide for coverage/API/perf add-ons

├─ .github/workflows/        # CI workflows (run tests and upload reports)
├─ playwright.config.js      # Playwright configuration (reporters, projects, media)
├─ tests/hooks.js            # Common hooks (afterEach for screenshots)
├─ README.md                 # This file (overview + run instructions)
└─ CONTRIBUTING.md / TEST_PLAYBOOK.md
```

Concepts used (short & simple)

- Page Object Model (POM)
	- Put page-specific selectors and actions into `pages/` classes.
	- Tests import the POM and drive high-level actions (keeps tests readable).

- Fixtures & Test Data
	- `fixtures/` stores static JSON/CSV examples.
	- `utils/dataGenerator.js` demonstrates generating dynamic data with Faker.
	- `utils/csvReader.js` shows simple CSV parsing for data-driven tests.

- Hooks & Reporting
	- `tests/hooks.js` adds an `afterEach` hook that captures screenshots on failures and attaches them to Playwright reports.
	- HTML and Allure reporters are configured in `playwright.config.js`. To use Allure locally, install Allure CLI separately.

- CI/CD
	- A GitHub Actions workflow runs tests on push/PR and uploads `playwright-report` artifacts. Modify workflow to better suit your branching policy and test splits.

- Bonus add-ons
	- API tests use Playwright's `request` fixture (see `tests/api.spec.js`).
	- Performance sampling uses `performance.timing` and timing measurements (see `tests/performance.spec.js`).
	- JS coverage demo uses Chromium CDP to capture coverage; integrate with Istanbul/nyc for reports (see `tests/coverage.spec.js`).

How to extend

- Add a new POM class in `pages/` and import it in tests.
- Add new fixtures under `fixtures/` and reference them in tests.
- Add custom fixtures via Playwright's `test.extend()` for auth/session handling.

Troubleshooting

- If `npx` fails with an execution policy error on PowerShell:

```powershell
Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy RemoteSigned
```

- If Playwright can't launch browsers, run:

```powershell
npx playwright install --with-deps
```

Contact & next steps

If you want, I can:
- Add CI job splitting slow E2E tests from fast smoke tests
- Integrate Allure generation and upload to CI
- Convert CDP coverage into an Istanbul/nyc flow and add a script to produce HTML coverage

